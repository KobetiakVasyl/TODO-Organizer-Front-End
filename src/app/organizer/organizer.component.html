<section fxLayout="column">
  <header
    class="small-container"
    fxLayoutAlign="space-between center"
  >
    <button
      mat-stroked-button
      color="primary"
      (click)="add()"
    >
      Create
    </button>

    <mat-form-field>
      <mat-label>Filter</mat-label>

      <input
        matInput
        type="text"
        placeholder="Type to filter..."
        [formControl]="filterControl"
      >

      <mat-hint>Data will filter automatically</mat-hint>
    </mat-form-field>
  </header>

  <main>

    <table
      matSort
      mat-table
      fxFlex="1 1 100%"
      matSortStart="desc"
      [dataSource]="dataSource"
    >
      <ng-container matColumnDef="index">
        <th mat-header-cell *matHeaderCellDef class="tac w45px"> No.</th>
        <td mat-cell *matCellDef="let i = index" class="tac w45px">{{ getRealIndex(i) + 1 }}</td>
      </ng-container>

      <ng-container matColumnDef="edit">
        <th mat-header-cell *matHeaderCellDef class="tac w45px">Edit</th>
        <td mat-cell *matCellDef="let element; let i = index" class="tac w45px">
          <mat-icon
            color="accent"
            [class.disabled]="element.completed"
            (click)="edit(getRealIndex(i), element)"
          >edit</mat-icon>
        </td>
      </ng-container>

      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Title</th>
        <td mat-cell *matCellDef="let element" [class.completed]="element.completed">{{ element.title }}</td>
      </ng-container>

      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Description</th>
        <td mat-cell *matCellDef="let element" [class.completed]="element.completed">{{ element.description }}</td>
      </ng-container>

      <ng-container matColumnDef="completed">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Completed</th>
        <td mat-cell *matCellDef="let element">
          <span *ngIf="element.completed; else notCompletedLabelBlock">Yes</span>

          <ng-template #notCompletedLabelBlock>
            <span>No</span>
          </ng-template>
        </td>
      </ng-container>

      <ng-container matColumnDef="delete">
        <th mat-header-cell *matHeaderCellDef class="tac w45px">Delete</th>
        <td mat-cell *matCellDef="let i = index" class="tac w45px">
          <mat-icon
            color="warn"
            (click)="remove(getRealIndex(i))"
          >
            delete
          </mat-icon>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </main>

  <footer>
    <mat-paginator
      showFirstLastButtons
      fxFlex="1 1 100%"
      [pageSizeOptions]="[5, 10, 20]"
    ></mat-paginator>
  </footer>
</section>
